<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cupcake Cloud â€” Product</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Grandstander:wght@500;700;900&family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --grape: #7e57c2;
        --bubble: #f48fb1;
        --mint: #2dd4bf;
        --lemon: #fcd34d;
        --sky: #60a5fa;
        --ink: #0f172a;
        --cream: #fffaf6;
      }
      body {
        background: linear-gradient(180deg, #fff 0%, #fff5fb 35%, #f0fbff 100%);
        color: var(--ink);
        font-family:
          Inter,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Helvetica,
          Arial,
          sans-serif;
      }
      .brand {
        font-family: Grandstander, system-ui, sans-serif;
      }
      .navbar {
        backdrop-filter: saturate(130%) blur(6px);
      }
      .nav-link {
        position: relative;
      }
      .nav-link:after {
        content: "";
        position: absolute;
        left: 0.6rem;
        right: 0.6rem;
        bottom: 0.25rem;
        height: 3px;
        background: linear-gradient(90deg, var(--bubble), var(--mint));
        border-radius: 99px;
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.25s ease;
      }
      .nav-link:hover:after,
      .nav-link.active:after {
        transform: scaleX(1);
      }

      .promo {
        background: linear-gradient(
          90deg,
          var(--bubble),
          var(--sky),
          var(--mint)
        );
        color: #0b2a2d;
      }

      .thumb {
        aspect-ratio: 4/3;
        object-fit: cover;
      }
      .thumb-sm {
        aspect-ratio: 1/1;
        object-fit: cover;
        cursor: pointer;
        border: 2px solid transparent;
        border-radius: 12px;
      }
      .thumb-sm.active {
        border-color: #0f172a;
      }

      .card-soft {
        border: 0;
        border-radius: 22px;
        background: #fff;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
      }
      .pill {
        border-radius: 999px;
        font-weight: 600;
      }

      .footer {
        background: #0b1220;
        color: #cbd5e1;
      }
      .footer a {
        color: #fbcfe8;
        text-decoration: none;
      }
      .footer a:hover {
        text-decoration: underline;
      }

      .review-star {
        color: #f59e0b;
      }
    </style>
  </head>
  <body>
    <!-- Promo -->
    <div class="promo py-2 text-center small">
      <div class="container">
        <i class="bi bi-box2-heart"></i> Build your own dozen and save 10%
        today!
      </div>
    </div>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-white sticky-top border-bottom py-3">
      <div class="container">
        <a
          class="navbar-brand brand d-flex align-items-center"
          href="index.html"
        >
          <span class="me-2" aria-hidden="true">
            <svg
              width="30"
              height="30"
              viewBox="0 0 64 64"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle cx="32" cy="20" r="10" fill="url(#g1)" />
              <path
                d="M10 34h44l-6 18a4 4 0 0 1-3.8 2.7H19.8A4 4 0 0 1 16 52l-6-18Z"
                fill="url(#g2)"
              />
              <defs>
                <linearGradient
                  id="g1"
                  x1="22"
                  y1="10"
                  x2="42"
                  y2="30"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stop-color="#F48FB1" />
                  <stop offset="1" stop-color="#60A5FA" />
                </linearGradient>
                <linearGradient
                  id="g2"
                  x1="10"
                  y1="34"
                  x2="54"
                  y2="52"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stop-color="#FCD34D" />
                  <stop offset="1" stop-color="#2DD4BF" />
                </linearGradient>
              </defs>
            </svg>
          </span>
          <span class="fs-3">Cupcake Cloud</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#nav"
          aria-controls="nav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="nav">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="collections.html">Collections</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="all-products.html">Shop</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#flavorModal"
              >
                Flavor of the Week
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Contact</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="account.html">Account</a>
            </li>
          </ul>
          <div class="d-flex ms-lg-3 gap-2 align-items-center">
            <!-- Auth: Sign in button (shown when logged out) -->
            <button
              class="btn btn-outline-secondary"
              id="btnSignIn"
              data-bs-toggle="modal"
              data-bs-target="#authModal"
            >
              <i class="bi bi-person"></i> Sign in
            </button>

            <!-- Auth: Register button (shown when logged out) -->
            <a class="btn btn-dark" id="btnRegister" href="register.html">
              <i class="bi bi-person-plus"></i> Register
            </a>

            <!-- Auth: user dropdown (shown when logged in) -->
            <div class="dropdown d-none" id="userMenu">
              <button
                class="btn btn-outline-secondary dropdown-toggle"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="bi bi-person-circle"></i>
                <span id="navUserName">Account</span>
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a class="dropdown-item" href="account.html"
                    ><i class="bi bi-person"></i> Account</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="orders.html"
                    ><i class="bi bi-receipt"></i> Orders</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <button class="dropdown-item text-danger" id="btnLogout">
                    <i class="bi bi-box-arrow-right"></i>
                    Log out
                  </button>
                </li>
              </ul>
            </div>

            <!-- Existing cart / order buttons -->
            <a class="btn btn-outline-dark" href="cart.html">
              <i class="bi bi-bag"></i> Cart
              <span class="badge text-bg-danger ms-1" id="cartCount">0</span>
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Breadcrumbs -->
    <div class="container pt-4">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb small">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item">
            <a href="/collections.html">Collections</a>
          </li>
          <li class="breadcrumb-item">
            <a href="/collection-fruity.html">Fruity Fresh</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            Key Lime Pie
          </li>
        </ol>
      </nav>
    </div>

    <!-- Product -->
    <main class="pb-5">
      <div class="container">
        <div class="row g-4">
          <!-- Gallery -->
          <div class="col-lg-6">
            <div class="card card-soft p-3">
              <img
                id="mainImg"
                class="thumb w-100 rounded-4"
                src="https://placehold.co/900x600/c4f2e8/0b1220?text=Key+Lime+Pie"
                alt="Key Lime Pie cupcake"
              />
              <div class="row g-2 mt-2">
                <div class="col-3">
                  <img
                    class="thumb-sm w-100 active"
                    data-src="https://placehold.co/900x600/c4f2e8/0b1220?text=Key+Lime+Pie"
                    src="https://placehold.co/300x300/c4f2e8/0b1220?text=1"
                    alt="thumb 1"
                  />
                </div>
                <div class="col-3">
                  <img
                    class="thumb-sm w-100"
                    data-src="https://placehold.co/900x600/ffe999/0b1220?text=Inside+Crumb"
                    src="https://placehold.co/300x300/ffe999/0b1220?text=2"
                    alt="thumb 2"
                  />
                </div>
                <div class="col-3">
                  <img
                    class="thumb-sm w-100"
                    data-src="https://placehold.co/900x600/b8f3ea/0b1220?text=Top+Swirl"
                    src="https://placehold.co/300x300/b8f3ea/0b1220?text=3"
                    alt="thumb 3"
                  />
                </div>
                <div class="col-3">
                  <img
                    class="thumb-sm w-100"
                    data-src="https://placehold.co/900x600/fef3c7/0b1220?text=Box+Shot"
                    src="https://placehold.co/300x300/fef3c7/0b1220?text=4"
                    alt="thumb 4"
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- Details -->
          <div class="col-lg-6">
            <div class="d-flex align-items-center gap-2 mb-2">
              <span class="badge text-bg-success pill">Fruity</span>
              <span class="badge text-bg-warning pill">Limited</span>
            </div>
            <h1 class="brand fw-black mb-1">Key Lime Pie</h1>
            <p class="lead mb-3">
              Zesty lime cake on a graham cracker crust with tangy creamâ€‘cheese
              frosting and lime zest.
            </p>

            <!-- BUNDLE / BUILD A BOX -->
            <div class="card card-soft p-3 mb-3" id="bundleCard">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h5 class="m-0">Select Cupcakes for Box</h5>
              </div>

              <div class="vstack gap-2" id="bundleList">
                <div
                  class="d-flex align-items-center justify-content-between rounded-4 p-2"
                >
                  <div class="d-flex align-items-center gap-2">
                    <img
                      src="https://placehold.co/600x400/ded3ff/0b1220?text=Mocha+Latte+Buzz"
                      alt="Mocha Latte Buzz"
                      width="56"
                      height="56"
                      class="rounded"
                      style="object-fit: cover"
                    />
                    <div>
                      <div class="fw-semibold small">Mocha Latte Buzz</div>
                      <div class="small text-secondary">$3.95</div>
                    </div>
                  </div>
                  <div class="input-group input-group-sm" style="width: 120px">
                    <button
                      class="btn btn-outline-secondary b-minus"
                      data-idx="0"
                      type="button"
                      aria-label="Decrease Mocha Latte Buzz"
                    >
                      <i class="bi bi-dash"></i>
                    </button>
                    <input
                      class="form-control text-center b-qty"
                      data-idx="0"
                      value="0"
                      inputmode="numeric"
                      aria-label="Quantity for Mocha Latte Buzz"
                    />
                    <button
                      class="btn btn-outline-secondary b-plus"
                      data-idx="0"
                      type="button"
                      aria-label="Increase Mocha Latte Buzz"
                    >
                      <i class="bi bi-plus"></i>
                    </button>
                  </div>
                </div>

                <div
                  class="d-flex align-items-center justify-content-between rounded-4 p-2"
                >
                  <div class="d-flex align-items-center gap-2">
                    <img
                      src="https://placehold.co/600x400/cffafe/0b1220?text=Matcha+Honey+Harmony"
                      alt="Matcha Honey Harmony"
                      width="56"
                      height="56"
                      class="rounded"
                      style="object-fit: cover"
                    />
                    <div>
                      <div class="fw-semibold small">Matcha Honey Harmony</div>
                      <div class="small text-secondary">$4.25</div>
                    </div>
                  </div>
                  <div class="input-group input-group-sm" style="width: 120px">
                    <button
                      class="btn btn-outline-secondary b-minus"
                      data-idx="1"
                      type="button"
                      aria-label="Decrease Matcha Honey Harmony"
                    >
                      <i class="bi bi-dash"></i>
                    </button>
                    <input
                      class="form-control text-center b-qty"
                      data-idx="1"
                      value="0"
                      inputmode="numeric"
                      aria-label="Quantity for Matcha Honey Harmony"
                    />
                    <button
                      class="btn btn-outline-secondary b-plus"
                      data-idx="1"
                      type="button"
                      aria-label="Increase Matcha Honey Harmony"
                    >
                      <i class="bi bi-plus"></i>
                    </button>
                  </div>
                </div>

                <div
                  class="d-flex align-items-center justify-content-between rounded-4 p-2"
                >
                  <div class="d-flex align-items-center gap-2">
                    <img
                      src="https://placehold.co/600x400/ffd1dc/0b1220?text=Strawberry+Shortcake"
                      alt="Strawberry Shortcake"
                      width="56"
                      height="56"
                      class="rounded"
                      style="object-fit: cover"
                    />
                    <div>
                      <div class="fw-semibold small">Strawberry Shortcake</div>
                      <div class="small text-secondary">$3.95</div>
                    </div>
                  </div>
                  <div class="input-group input-group-sm" style="width: 120px">
                    <button
                      class="btn btn-outline-secondary b-minus"
                      data-idx="2"
                      type="button"
                      aria-label="Decrease Strawberry Shortcake"
                    >
                      <i class="bi bi-dash"></i>
                    </button>
                    <input
                      class="form-control text-center b-qty"
                      data-idx="2"
                      value="0"
                      inputmode="numeric"
                      aria-label="Quantity for Strawberry Shortcake"
                    />
                    <button
                      class="btn btn-outline-secondary b-plus"
                      data-idx="2"
                      type="button"
                      aria-label="Increase Strawberry Shortcake"
                    >
                      <i class="bi bi-plus"></i>
                    </button>
                  </div>
                </div>

                <div
                  class="d-flex align-items-center justify-content-between rounded-4 p-2"
                >
                  <div class="d-flex align-items-center gap-2">
                    <img
                      src="https://placehold.co/600x400/ffe3b3/0b1220?text=Churro+Cinnamon+Swirl"
                      alt="Churro Cinnamon Swirl"
                      width="56"
                      height="56"
                      class="rounded"
                      style="object-fit: cover"
                    />
                    <div>
                      <div class="fw-semibold small">Churro Cinnamon Swirl</div>
                      <div class="small text-secondary">$3.85</div>
                    </div>
                  </div>
                  <div class="input-group input-group-sm" style="width: 120px">
                    <button
                      class="btn btn-outline-secondary b-minus"
                      data-idx="3"
                      type="button"
                      aria-label="Decrease Churro Cinnamon Swirl"
                    >
                      <i class="bi bi-dash"></i>
                    </button>
                    <input
                      class="form-control text-center b-qty"
                      data-idx="3"
                      value="0"
                      inputmode="numeric"
                      aria-label="Quantity for Churro Cinnamon Swirl"
                    />
                    <button
                      class="btn btn-outline-secondary b-plus"
                      data-idx="3"
                      type="button"
                      aria-label="Increase Churro Cinnamon Swirl"
                    >
                      <i class="bi bi-plus"></i>
                    </button>
                  </div>
                </div>
              </div>

              <div class="text-end mt-2">
                <small class="text-secondary"
                  ><span id="bundleCount">0</span> selected</small
                >
              </div>
            </div>

            <div class="card card-soft p-3 mb-3">
              <div class="row g-3 align-items-end">
                <div class="col-sm-6">
                  <label class="form-label">Qty</label>
                  <div class="input-group">
                    <button
                      class="btn btn-outline-secondary"
                      id="minus"
                      type="button"
                    >
                      <i class="bi bi-dash"></i>
                    </button>
                    <input
                      id="qty"
                      class="form-control text-center"
                      value="1"
                      inputmode="numeric"
                    />
                    <button
                      class="btn btn-outline-secondary"
                      id="plus"
                      type="button"
                    >
                      <i class="bi bi-plus"></i>
                    </button>
                  </div>
                </div>
                <div class="col-sm-6 text-sm-end">
                  <div class="small text-secondary">Price</div>
                  <div class="h4 m-0" id="price">$3.75</div>
                </div>
              </div>
              <div class="d-grid mt-3">
                <button id="addBtn" class="btn btn-dark btn-lg">
                  <i class="bi bi-bag-plus"></i> Add to cart
                </button>
              </div>
              <div class="d-flex gap-3 mt-3 small">
                <div><i class="bi bi-emoji-smile"></i> Happiness guarantee</div>
              </div>
            </div>

            <div class="row g-3">
              <div class="col-sm-6">
                <div class="card card-soft p-3 h-100">
                  <div class="d-flex align-items-center gap-2 mb-1">
                    <i class="bi bi-shield-check text-success"></i
                    ><strong>Allergenâ€‘friendly</strong>
                  </div>
                  <p class="small text-secondary mb-0">
                    Contains: dairy, eggs, wheat. <br />Made in a facility that
                    also handles nuts.
                  </p>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="card card-soft p-3 h-100">
                  <div class="d-flex align-items-center gap-2 mb-1">
                    <i class="bi bi-sun text-warning"></i
                    ><strong>Fresh daily</strong>
                  </div>
                  <p class="small text-secondary mb-0">
                    Baked each morning. Best enjoyed at room temp.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Related products -->
        <section class="py-5">
          <div class="d-flex justify-content-between align-items-end mb-3">
            <h3 class="brand fw-black m-0">You might also like</h3>
            <a class="link-dark" href="all-products.html"
              >See all <i class="bi bi-arrow-right-short"></i
            ></a>
          </div>
          <div class="row g-4">
            <div class="col-12 col-sm-6 col-lg-3">
              <div class="card card-soft h-100">
                <img
                  class="thumb w-100"
                  src="https://placehold.co/600x400/ded3ff/0b1220?text=Mocha+Latte+Buzz"
                  alt="Mocha Latte Buzz"
                />
                <div class="card-body d-flex flex-column">
                  <h6 class="mb-1">Mocha Latte Buzz</h6>
                  <div
                    class="d-flex justify-content-between align-items-center mt-auto"
                  >
                    <span class="badge text-bg-dark pill">Chocolate</span>
                    <strong>$3.95</strong>
                  </div>
                  <button
                    class="btn btn-outline-dark w-100 mt-2"
                    onclick="addToCart('Mocha Latte Buzz', 3.95)"
                  >
                    <i class="bi bi-bag-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-3">
              <div class="card card-soft h-100">
                <img
                  class="thumb w-100"
                  src="https://placehold.co/600x400/cffafe/0b1220?text=Matcha+Honey+Harmony"
                  alt="Matcha Honey Harmony"
                />
                <div class="card-body d-flex flex-column">
                  <h6 class="mb-1">Matcha Honey Harmony</h6>
                  <div
                    class="d-flex justify-content-between align-items-center mt-auto"
                  >
                    <span class="badge text-bg-warning pill">Specialty</span>
                    <strong>$4.25</strong>
                  </div>
                  <button
                    class="btn btn-outline-dark w-100 mt-2"
                    onclick="addToCart('Matcha Honey Harmony', 4.25)"
                  >
                    <i class="bi bi-bag-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-3">
              <div class="card card-soft h-100">
                <img
                  class="thumb w-100"
                  src="https://placehold.co/600x400/ffd1dc/0b1220?text=Strawberry+Shortcake"
                  alt="Strawberry Shortcake"
                />
                <div class="card-body d-flex flex-column">
                  <h6 class="mb-1">Strawberry Shortcake</h6>
                  <div
                    class="d-flex justify-content-between align-items-center mt-auto"
                  >
                    <span class="badge text-bg-success pill">Fruity</span>
                    <strong>$3.95</strong>
                  </div>
                  <button
                    class="btn btn-outline-dark w-100 mt-2"
                    onclick="addToCart('Strawberry Shortcake', 3.95)"
                  >
                    <i class="bi bi-bag-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-3">
              <div class="card card-soft h-100">
                <img
                  class="thumb w-100"
                  src="https://placehold.co/600x400/ffe3b3/0b1220?text=Churro+Cinnamon+Swirl"
                  alt="Churro Cinnamon Swirl"
                />
                <div class="card-body d-flex flex-column">
                  <h6 class="mb-1">Churro Cinnamon Swirl</h6>
                  <div
                    class="d-flex justify-content-between align-items-center mt-auto"
                  >
                    <span class="badge text-bg-dark pill">Chocolate</span>
                    <strong>$3.85</strong>
                  </div>
                  <button
                    class="btn btn-outline-dark w-100 mt-2"
                    onclick="addToCart('Churro Cinnamon Swirl', 3.85)"
                  >
                    <i class="bi bi-bag-plus"></i> Add
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- ADD-TO-CART MODAL -->
    <div class="modal fade" id="addModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-4 border-0">
          <div class="modal-header border-0">
            <h5 class="modal-title">
              <i class="bi bi-bag-plus me-1"></i> Add to cart
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>

          <div class="modal-body pt-0">
            <div class="d-flex gap-3 align-items-start">
              <img
                id="addImg"
                src=""
                alt=""
                class="rounded"
                width="96"
                height="96"
                style="object-fit: cover"
              />
              <div class="flex-grow-1">
                <div id="addName" class="fw-semibold">Product Name</div>
                <div class="small text-secondary">Price</div>
                <p
                  id="addDescription"
                  class="card-text small text-secondary mb-2"
                >
                  Product Description
                </p>
                <div id="addPrice" class="h5 m-0">$0.00</div>
              </div>
            </div>

            <div class="mt-3">
              <label for="addQty" class="form-label small text-secondary"
                >Quantity</label
              >
              <input
                id="addQty"
                type="number"
                class="form-control"
                min="1"
                step="1"
                value="1"
              />
            </div>
          </div>

          <div class="modal-footer border-0">
            <button class="btn btn-outline-dark" data-bs-dismiss="modal">
              Cancel
            </button>
            <button class="btn btn-dark" id="confirmAdd">
              <i class="bi bi-bag-plus"></i> Add
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer pt-5 pb-4 mt-5">
      <div class="container">
        <div class="row g-4">
          <div class="col-md-4">
            <div class="brand fs-3 mb-2">Cupcake Cloud</div>
            <p class="text-light">
              Smallâ€‘batch bakery crafting colorful cupcakes since 2012.
            </p>
            <div class="d-flex gap-3">
              <a href="#" aria-label="Instagram"
                ><i class="bi bi-instagram fs-4"></i
              ></a>
              <a href="#" aria-label="TikTok"
                ><i class="bi bi-tiktok fs-4"></i
              ></a>
              <a href="#" aria-label="Facebook"
                ><i class="bi bi-facebook fs-4"></i
              ></a>
            </div>
          </div>
          <div class="col-6 col-md-2">
            <h6 class="text-uppercase text-secondary">Shop</h6>
            <ul class="list-unstyled small">
              <li>
                <a href="all-products.html">All Cupcakes</a>
              </li>
              <li><a href="collections.html">Collections</a></li>
            </ul>
          </div>
          <div class="col-6 col-md-2">
            <h6 class="text-uppercase text-secondary">Help</h6>
            <ul class="list-unstyled small">
              <li><a href="faq.html">FAQ</a></li>
              <li><a href="contact.html">Contact</a></li>
            </ul>
          </div>
          <div class="col-md-4">
            <h6 class="text-uppercase text-secondary">Guarantee</h6>
            <p class="small">
              If you donâ€™t love it, weâ€™ll make it right. Thatâ€™s our
              Sprinkleâ€‘Happy Guarantee.
            </p>
          </div>
        </div>
        <hr class="border-secondary border-opacity-25 my-4" />
        <div
          class="d-flex flex-wrap justify-content-between small text-secondary"
        >
          <span>Â© <span id="year"></span> Cupcake Cloud</span>
          <div class="d-flex gap-3">
            <a href="privacy.html">Privacy</a>
            <a href="terms.html">Terms</a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Cart Modal (demo) -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-end">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <i class="bi bi-bag me-1"></i> Your Cart
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <ul class="list-group list-group-flush" id="cartList"></ul>
          </div>
          <div class="modal-footer d-block">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <strong>Subtotal</strong><strong id="cartTotal">$0.00</strong>
            </div>
            <div class="d-grid gap-2">
              <button
                class="btn btn-dark"
                onclick="toast('Checkout is a mock in this demo!')"
              >
                <i class="bi bi-credit-card"></i> Checkout
              </button>
              <button class="btn btn-outline-dark" data-bs-dismiss="modal">
                Continue Shopping
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- FLAVOR OF THE WEEK MODAL -->
    <div
      class="modal fade"
      id="flavorModal"
      tabindex="-1"
      aria-labelledby="flavorModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 id="flavorModalLabel" class="modal-title brand fw-black">
              Flavor of the Week
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>

          <div class="modal-body">
            <div class="row g-4 align-items-center">
              <div class="col-lg-6">
                <img
                  class="img-fluid rounded-4 shadow"
                  src="https://placehold.co/900x560/fef3c7/0b1220?text=Flavor+of+the+Week:+Mango+Sunrise"
                  alt="Flavor of the Week"
                />
              </div>
              <div class="col-lg-6">
                <h2 class="brand fw-black">
                  Flavor of the Week: Mango Sunrise
                </h2>
                <p>
                  Vanilla-mango marble cake with passionfruit curd and mango
                  buttercream. Tropical sunshine in a bite.
                </p>

                <div class="d-flex align-items-center gap-3 mb-3">
                  <span class="badge text-bg-warning">Limited</span>
                  <span class="badge text-bg-info">Tropical</span>
                </div>

                <div class="p-3 border rounded-4 bg-white">
                  <div
                    class="d-flex justify-content-between align-items-center"
                  >
                    <strong>Ends in</strong>
                    <div class="countdown h5 m-0" id="countdown">
                      03d 00h 00m 00s
                    </div>
                  </div>
                </div>

                <div class="d-flex gap-3 mt-3">
                  <button
                    class="btn btn-dark add"
                    data-name="Mango Sunrise (FOTW)"
                    data-price="4.50"
                  >
                    <i class="bi bi-bag-plus"></i> Add to cart
                  </button>
                  <button
                    class="btn btn-outline-dark"
                    data-bs-dismiss="modal"
                    onclick="scrollToShop()"
                  >
                    <i class="bi bi-bag"></i> See all flavors
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <small class="text-secondary"
              >Limited-time drop â€” available while supplies last.</small
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div
      class="position-fixed bottom-0 start-50 translate-middle-x p-3"
      style="z-index: 1080"
    >
      <div
        id="liveToast"
        class="toast align-items-center text-white bg-dark border-0"
        role="status"
        aria-live="polite"
        aria-atomic="true"
      >
        <div class="d-flex">
          <div class="toast-body" id="toastMsg">Added to cart!</div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();

      // Gallery thumbs
      const main = document.getElementById("mainImg");
      document.querySelectorAll(".thumb-sm").forEach((img) => {
        img.addEventListener("click", () => {
          document
            .querySelectorAll(".thumb-sm")
            .forEach((t) => t.classList.remove("active"));
          img.classList.add("active");
          main.src = img.dataset.src;
        });
      });

      // qty + pricing demo
      const qty = document.getElementById("qty");
      const priceEl = document.getElementById("price");
      const pack6 = document.getElementById("pack6");
      const pack12 = document.getElementById("pack12");
      const base6 = 3.75;
      const base12 = 7.2; // sample prices for single cupcake vs 2x pack unit

      // --- page-only cart (like index.html) ---
      const cart = [];
      function cartCount() {
        return cart.reduce((a, c) => a + (c.qty || 1), 0);
      }
      function renderCartCount() {
        const el = document.getElementById("cartCount");
        if (el) el.textContent = cartCount();
      }
      renderCartCount();

      // --- Add-to-Cart modal wiring ---
      const addModalEl = document.getElementById("addModal");
      const addModal = new bootstrap.Modal(addModalEl);
      const addNameEl = document.getElementById("addName");
      const addPriceEl = document.getElementById("addPrice");
      const addDescriptionEl = document.getElementById("addDescription");
      const addImgEl = document.getElementById("addImg");
      const addQtyEl = document.getElementById("addQty");
      const confirmAddBtn = document.getElementById("confirmAdd");

      let pendingItem = null;
      function openAddModal(item) {
        pendingItem = item; // { id?, name, price, img?, description? }
        addNameEl.textContent = item.name;
        addPriceEl.textContent = `$${item.price.toFixed(2)}`;
        addDescriptionEl.textContent = item.description || "";
        addImgEl.src =
          item.img || "https://placehold.co/300x300/eee/333?text=Cupcake";
        addImgEl.alt = item.name;
        addQtyEl.value = 1;
        addModal.show();
      }

      confirmAddBtn.addEventListener("click", () => {
        if (!pendingItem) return;
        const qty = Math.max(1, parseInt(addQtyEl.value, 10) || 1);
        const existing =
          cart.find((i) => i.name === pendingItem.name) ||
          (cart.push({
            name: pendingItem.name,
            price: pendingItem.price,
            qty: 0,
          }),
          cart[cart.length - 1]);
        existing.qty += qty;
        addModal.hide();
        renderCartCount();
        toast(`${pendingItem.name} Ã— ${qty} added to cart`);
        pendingItem = null;
      });

      // --- Hook up "Add" buttons to open the modal ---

      // Main product "Add to cart" (uses selected pack + computed pack price)
      document.getElementById("addBtn").onclick = () => {
        const name =
          "Key Lime Pie" + (pack12.checked ? " â€” 12-Pack" : " â€” 6-Pack");
        const each = pack12.checked ? base12 : base6;
        const n = Math.max(1, parseInt(qty.value || "1", 10));

        const desc = bundleSummary();
        const img = document.getElementById("mainImg")?.src || "";

        // Same modal flow as index.html
        openAddModal({
          name,
          price: each * n, // base product total only
          img,
          description: desc ? `Bundle: ${desc}` : "",
        });
      };

      // Flavor-of-the-Week "Add" inside its modal (already has data attrs)
      document.querySelectorAll(".add").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          // ignore the main #addBtn we handled above
          if (btn.id === "addBtn") return;
          e.preventDefault();
          const name = btn.dataset.name || "Cupcake";
          const price = parseFloat(btn.dataset.price || "0");
          openAddModal({
            name,
            price,
            description: "Limited release",
          });
        });
      });

      // Related products "Add" buttons â€” convert to modal behavior
      document.querySelectorAll('[onclick^="addToCart"]').forEach((btn) => {
        btn.removeAttribute("onclick"); // minimal cleanup
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          const card = btn.closest(".card");
          const name =
            card.querySelector("h6")?.textContent.trim() || "Cupcake";
          const priceTxt =
            card.querySelector("strong")?.textContent.replace("$", "") || "0";
          const price = parseFloat(priceTxt);
          const img = card.querySelector("img")?.src;
          const badge = card.querySelector(".badge")?.textContent.trim();
          openAddModal({
            name,
            price,
            img,
            description: badge ? `Category: ${badge}` : "",
          });
        });
      });

      // --- Bundle options (sample) ---
      const bundleOptions = [
        {
          id: "mocha",
          name: "Mocha Latte Buzz",
          price: 3.95,
          img: "https://placehold.co/600x400/ded3ff/0b1220?text=Mocha+Latte+Buzz",
        },
        {
          id: "mch",
          name: "Matcha Honey Harmony",
          price: 4.25,
          img: "https://placehold.co/600x400/cffafe/0b1220?text=Matcha+Honey+Harmony",
        },
        {
          id: "straw",
          name: "Strawberry Shortcake",
          price: 3.95,
          img: "https://placehold.co/600x400/ffd1dc/0b1220?text=Strawberry+Shortcake",
        },
        {
          id: "churro",
          name: "Churro Cinnamon Swirl",
          price: 3.85,
          img: "https://placehold.co/600x400/ffe3b3/0b1220?text=Churro+Cinnamon+Swirl",
        },
      ];

      const bundleState = bundleOptions.map((o) => ({ ...o, qty: 0 }));
      const bundleList = document.getElementById("bundleList");
      const bundleCountEl = document.getElementById("bundleCount");

      // Render simple rows with +/- (no price math)
      bundleList.innerHTML = bundleState
        .map(
          (o, i) => `
              <div class="d-flex align-items-center justify-content-between rounded-4 p-2">
                <div class="d-flex align-items-center gap-2">
                  <img src="${o.img}" alt="${o.name}" width="56" height="56" class="rounded" style="object-fit:cover">
                  <div>
                    <div class="fw-semibold small">${o.name}</div>
                    <div class="small text-secondary">$${o.price.toFixed(2)}</div>
                  </div>
                </div>
                <div class="input-group input-group-sm" style="width: 120px">
                  <button class="btn btn-outline-secondary b-minus" data-idx="${i}" type="button" aria-label="Decrease ${o.name}"><i class="bi bi-dash"></i></button>
                  <input class="form-control text-center b-qty" data-idx="${i}" value="0" inputmode="numeric" aria-label="Quantity for ${o.name}">
                  <button class="btn btn-outline-secondary b-plus" data-idx="${i}" type="button" aria-label="Increase ${o.name}"><i class="bi bi-plus"></i></button>
                </div>
              </div>
            `,
        )
        .join("");

      // Count helper + summary
      function updateBundleCount() {
        const count = bundleState.reduce((a, c) => a + c.qty, 0);
        bundleCountEl.textContent = count;
      }
      function bundleSummary() {
        const picked = bundleState.filter((i) => i.qty > 0);
        if (!picked.length) return "";
        return picked.map((i) => `${i.name} Ã— ${i.qty}`).join(", ");
      }

      // +/- handlers + manual input
      bundleList.addEventListener("click", (e) => {
        const minus = e.target.closest(".b-minus");
        const plus = e.target.closest(".b-plus");
        if (minus) {
          const i = +minus.dataset.idx;
          bundleState[i].qty = Math.max(0, bundleState[i].qty - 1);
          bundleList.querySelector(`.b-qty[data-idx="${i}"]`).value =
            bundleState[i].qty;
          updateBundleCount();
        }
        if (plus) {
          const i = +plus.dataset.idx;
          bundleState[i].qty += 1;
          bundleList.querySelector(`.b-qty[data-idx="${i}"]`).value =
            bundleState[i].qty;
          updateBundleCount();
        }
      });
      bundleList.addEventListener("input", (e) => {
        if (!e.target.classList.contains("b-qty")) return;
        const i = +e.target.dataset.idx;
        bundleState[i].qty = Math.max(0, parseInt(e.target.value || "0", 10));
        e.target.value = bundleState[i].qty;
        updateBundleCount();
      });
      updateBundleCount();

      // toast helper
      let t;
      function toast(msg) {
        const el = document.getElementById("liveToast");
        document.getElementById("toastMsg").textContent = msg;
        (t || (t = new bootstrap.Toast(el, { delay: 2000 }))).show();
      }
    </script>
  </body>
</html>
